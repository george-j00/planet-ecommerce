<!DOCTYPE html>
<html lang="en">
<%- include('../partials/header');%>
  
<style>
  .contents  {
    display: none;
  }
</style>

<body>
<div class="fixed">
  <%- include('../partials/navbar');%>
</div>

<div class="sidebar bg-light">
  <div class="profile_info">
    <div class="profile-icon">
     <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdqXZFnoB9eMvcBSXMRQrtLBL_JhTfjZFbtcu9DiBoJfu4qqFZleZRD_6WTtfoMXkNZB0&usqp=CAU" alt="">
    </div>
  <h4 class="text-dark"> <strong> <%= userData.name %></strong> </h4>

  </div>
  <a href="#profile" class="text-dark">Profile</a>
  <a href="#address" class="text-dark">Address</a>
  <a href="#order" class="text-dark">Orders</a>
  <a href="#returns" class="text-dark">Returns</a>
  <a href="#wallet" class="text-dark">Wallet</a>
  <button type="button" id="logoutButton" class="btn btn-danger ml-4 mt-1" >Logout</button>
</div>

<div class="content">
  <%- include('../partials/userProfile');%>
  <%- include('../partials/userAddress');%>
  
  <%- include('../partials/userOrders');%>
  <%- include('../partials/userReturns');%>
  <%- include('../partials/userWallet');%>
  <!-- logout modal -->
  <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editProductModalLabel">Logout</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <p> Are you sure you want to log out ?</p>
         <button type="button" id="modalLogoutBtn" class="btn btn-danger ml-4 mt-1 btn-logout">Logout</button>

        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const sidebarLinks = document.querySelectorAll(".sidebar a");
    const contentSections = document.querySelectorAll(".contents");

    // Display the "Profile" content section initially
    const profileSection = document.getElementById("profile");
    profileSection.style.display = "block";

    sidebarLinks.forEach(link => {
      link.addEventListener("click", event => {
        event.preventDefault();

        // Hide all content sections
        contentSections.forEach(section => {
          section.style.display = "none";
        });

        // Show the selected content section
        const targetSectionId = link.getAttribute("href").substring(1);
        const targetSection = document.getElementById(targetSectionId);
        targetSection.style.display = "block";
      });
    });
  });
  
  const logoutButton = document.getElementById('logoutButton');
  const modalLogoutBtn = document.getElementById('modalLogoutBtn');
  const logoutModal = new bootstrap.Modal(document.getElementById('logoutModal'));

logoutButton.addEventListener('click', function () {
  logoutModal.show();
});
modalLogoutBtn.addEventListener('click',async function () {
  try {
    const response = await fetch('/logout', {
      method: 'POST',
    });
    if (response.ok) {
      // Redirect or perform any additional client-side logout actions
      window.location.href = '/login';
    }
  } catch (error) {
    console.error('Logout failed:', error);
  }
});

  
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
</body>
</html>
